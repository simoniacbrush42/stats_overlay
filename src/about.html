<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Stats Overlay</title>
  <link rel="stylesheet" href="index.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
  <link rel="stylesheet" type="text/css" href="alert.css">
  <link rel="stylesheet" type="text/css" href="about.css">
</head>

<body>
  <div class = "buttonsArea">
    <span class = "closeButton" id = "closeButton" onclick="closeWindow()"></span>
    <span class = "minimizeButton" id = "minimizeButton" onclick="minimizeWindow()"></span>
    <span class = "fullButton" id = "fullButton" onclick="fullscreenWindow()"></span>
    
    <!-- <button></button>
    <button></button> -->
  </div>
  <div id="sidebar">
        <div class="toggle-btn" onclick="show()">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <ul>
            <li>
                <form action="bedwars.html">
                    <button>Bedwars</button>
                </form>
            </li>
            <li>
                <form action="bridge.html">
                    <button>Bridge</button>
                </form>
            </li>
            <li>
                <form action="skywars.html">
                    <button>Skywars</button>
                </form>
            </li>
            <li>
                <form action="search.html">
                    <button>Search</button>
                </form>
            </li>
            <li>
                <form action="settings.html">
                    <button>Settings</button>
                </form>

            </li>
            <li>
                <form action="index.html">
                    <button>Select Client</button>
                </form>
            </li>
            <li>
                <form action="about.html">
                    <button>About</button>
                </form>
            </li>
        </ul>
    </div>
    <div class="title">
      <h1>About</h1>
    </div>
    <div class = "sections">
      <div class = "scroll">
        <section class = "instruction">

        <h1>Changing/Setting API Key</h1>
        <!-- <img src="images/api_key.gif" class = "gifs"> -->
        <p>To change/set your API key, go onto hypixel and type the command /api new. A notification should indicate that your API key has been changed. If this does not work, go into the settings and copy and paste the API key from your Minecraft chat into the API key area.</p>
        </section>
        <section class = "instruction">
          <h1>Bedwars</h1>
          <p>Navigate to the bedwars tab in the menu. After you join a bedwars game, run the command /who. The players in your game will then populated the overlay. The players that join the game after you will also be added. If any players are missing, run the command /who again, and all of the players in the game will be added to the overlay.</p>
        </section>
        <section class = "instruction">
          <h1>Skywars</h1>
          <p>Navigate to the skywars tab in the menu. After you join a skywars game, the players that join after you will be added to the overlay. In order to get all the players on the overlay, you either have to wait until the game starts and then run the command /who, or you can be the first player into a lobby.</p>
        </section>
        <section class = "instruction">
          <h1>Bridge</h1>
          <p>Navigate to the bridge tab in the menu. After you join a bridge game, you will need to wait until the game starts and then run the command /who. The people in your game will then appear on the overlay.</p>
        </section>
      </div>
      
    </div>
    <div class= "alert hidden" id = "alert">
        <span class="fa" id = "icon"></span>
        <span class="msg" id = "alertText"></span>
        <span class = "close-btn" onclick="removeAlert()">
            <i class="fa fa-close" style="font-size: 20px;"></i>
        </span>
    </div>
  

  <!-- <form>
    <label>Custom Path</label>
    <input type="file" name="logfile" onsubmit="customLogPath()">
  </form> -->


  <!-- <div id="sidebar">
    <div class="toggle-btn" onclick="show()">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <ul>
      <li>
        <form action="bedwars.html">
          <button>Bedwars</button>
        </form>
      </li>
      <li>
        <form action="bridge.html">
          <button>Bridge</button>
        </form>
      </li>
      <li>
        <form action="skywars.html">
            <button>Skywars</button>
        </form>
      </li>
      <li>
        <form action="search.html">
          <button>Search</button>
        </form>
      </li>
      <li>
        <form action="settings.html">
          <button>Settings</button>
        </form>

      </li>
    </ul>
  </div> -->
  <script>
    function show() {
        document.getElementById("sidebar").classList.toggle('active');
    }
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script type="text/javascript" src="backgroundOpacity.js"></script>
  <script type="text/javascript" src="client.js"></script>
  <script type="text/javascript" src="alert.js"></script>
  <script type="text/javascript" src = "fileReader.js"></script>
  <script type="text/javascript" src="buttons.js"></script>

  <script>
    const filename = path.resolve(__dirname, "data.json");
    fs.readFile(filename, 'utf8', (error, data) => {
     if(error){
        console.log(error);
        return;
     }
     var content = JSON.parse(data);
    });
    function lunarHandler(){
      setClientLunar()
      content.client = "lunar"
      changeJSON()
    }

    function badlionHandler(){
      setClientBadlion()
      content.client = "badlion"
      changeJSON()
    }

    function forgeHandler(){
      setClientForge()
      content.client = "forge"
      changeJSON()
    }

    function changeJSON(){
      fs.writeFile(filename, JSON.stringify(content), function writeJSON(err) {
        if (err) return console.log(err);
      });
      window.location.href = "bedwars.html";
    }
    // path = require("path");
    // fs = require("fs");
    // const filename = path.resolve(__dirname, "data.json");
    // var file_content = fs.readFileSync(filename);
    // var content = JSON.parse(file_content);
    // //console.log(content)
    // localStorage.setItem("api_key", content.api_key);
    // localStorage.setItem("background", content.background);
    
    function show() {
      document.getElementById("sidebar").classList.toggle('active');
    }
    // function setClientLunar(){
    //   const os = require("os");

    //   // check the available memory
    //   const userHomeDir = os.homedir();
    //   console.log(userHomeDir)
    //   var isWin = process.platform === "win32";
    //   if(isWin){
    //     fs.access(userHomeDir+"/.lunarclient/offline/1.8/logs", function(error) {
    //       if (error) {
    //         console.log("Directory does not exist.")
    //       } else {
    //         console.log("Directory exists.")
    //         localStorage.setItem("log_path", userHomeDir+"/.lunarclient/offline/1.8/logs/latest.log");
    //         window.location.href = "bedwars.html";
    //       }
    //     });
    //   }else{
    //     fs.access(userHomeDir+"/.lunarclient/offline/1.8/logs", function(error) {
    //       if (error) {
    //         console.log("Directory does not exist.")
    //       } else {
    //         console.log("Directory exists.")
    //         localStorage.setItem("log_path", userHomeDir+"/.lunarclient/offline/1.8/logs/latest.log");
    //         window.location.href = "bedwars.html";
    //       }
    //     })
    //   }
      
    // }

    // function setClientBadlion(){
    //   const os = require("os");

    //   // check the available memory
    //   const userHomeDir = os.homedir();
    //   console.log(userHomeDir)
    //   var isWin = process.platform === "win32";
    //   if(isWin){
    //     fs.access(userHomeDir+"/AppData/Roaming/.minecraft/logs", function(error) {
    //       if (error) {
    //         console.log("Directory does not exist.")
    //       } else {
    //         console.log("Directory exists.")
    //         localStorage.setItem("log_path", userHomeDir+"/AppData/Roaming/.minecraft/logs/latest.log");
    //         window.location.href = "bedwars.html";
    //       }
    //     });
    //   }else{
    //     fs.access(userHomeDir+"/Library/Application Support/minecraft/logs", function(error) {
    //       if (error) {
    //         console.log("Directory does not exist.")
    //       } else {
    //         console.log("Directory exists.")
    //         localStorage.setItem("log_path", userHomeDir+"/Library/Application Support/minecraft/logs/latest.log");
    //         window.location.href = "bedwars.html";

    //       }
    //     })
    //   }
    // }

    // function setClientForge(){
    //   const os = require("os");

    //   // check the available memory
    //   const userHomeDir = os.homedir();
    //   console.log(userHomeDir)
    //   var isWin = process.platform === "win32";
    //   if(isWin){
    //     fs.access(userHomeDir+"/AppData/Roaming/.minecraft/logs", function(error) {
    //       if (error) {
    //         console.log("Directory does not exist.")
    //       } else {
    //         console.log("Directory exists.")
    //         localStorage.setItem("log_path", userHomeDir+"/AppData/Roaming/.minecraft/logs/latest.log");
    //         window.location.href = "bedwars.html";
    //       }
    //     });
    //   }else{
    //     fs.access(userHomeDir+"/Library/Application Support/minecraft/logs", function(error) {
    //       if (error) {
    //         console.log("Directory does not exist.")
    //       } else {
    //         console.log("Directory exists.")
    //         localStorage.setItem("log_path", userHomeDir+"/Library/Application Support/minecraft/logs/latest.log");
    //         window.location.href = "bedwars.html";

    //       }
    //     })
    //   }
    // }

  </script>

  <!-- <script type="text/javascript">
        console.log("running")
        const electron = require('electron');
        const readLastLines = require('read-last-lines');
        var fs = require('fs');
        const path = require('path');
        
        //const log_timestamp = require('log-timestamp');

        const buttonPressesLogFile = localStorage.getItem('log_path');

        console.log(`Watching for file changes on ${buttonPressesLogFile}`);

        fs.watchFile(buttonPressesLogFile, { interval: 1}, (curr, prev) => {
          console.log(`${buttonPressesLogFile} file Changed`);

          readLastLines.read(localStorage.getItem('log_path'), 1)
                .then((lines) => {
                    let team_lines;
                    loop_lines = lines.split("\n")
                    //console.log(lines.split("\n"))
                    for (var i = loop_lines.length - 1; i >= 0; i--){
                      let line_parts = loop_lines[i].split(' ')
                      //console.log(line_parts[4])
                      if (line_parts[6]){
                        //console.log(line_parts[4]+line_parts[5]+line_parts[6])
                        if (line_parts[4]+line_parts[5]+line_parts[6] == "YournewAPI"){
                            //set api key
                            //console.log("API")

                            setAPIKey(line_parts[9].slice(0, -2))
                        } 
                      }
                    }
                })
          })
        function setAPIKey(key){
          //console.log(key);
          var path = require("path")
          const filename = path.resolve(__dirname, "data.json");
          var file_content = fs.readFileSync(filename);
          var content = JSON.parse(file_content);
          console.log(content)
          content.api_key = key

          fs.writeFile(filename, JSON.stringify(content), function writeJSON(err) {
            if (err) return console.log(err);
          });
          localStorage.setItem("api_key", key)
        }
  </script> -->

  <script type="text/javascript" src = "index.js"></script>
</body>

</html>